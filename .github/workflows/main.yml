name: Code build and review
on: push
jobs:
  buildjob:
    runs-on: ubuntu-latest
    steps:
    - name: Clone the Current Repository on the runner
      uses: actions/checkout@v4
      
    - name: Seting up Java17 & Maven
      uses: actions/setup-java@v4
      with:
      	distribution: 'temurin'
      	java-version: '17'
      	cache: 'maven'
          
    - name: Build the code
      run: mvn package
      
    - name: Review the code using sonarcloud
      run: mv -B verify sonar:sonar -Dsonar.projectKey=RohitDevopsSessions_java-reachability-playground -Dsonar.organization=devopsdemosession -Dsonar.host.url=https://sonarcloud.io -Dsonar.token = $SONAR_TOKEN
    env:
     GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN}}
     SONAR_TOKEN: ${{ secrets.SONAR_TOKEN}}
